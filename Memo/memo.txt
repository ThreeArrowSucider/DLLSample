[前準備]
VisualStudioにC++/cliを追加インストールしておいてね。



[project]
CppProject : C++(native)
c++プロジェクト。
ここの関数をC#で呼び出したい。

CppCli : C++/cli
ラッパー（ラッピングの方）に使っているC++/cliプロジェクト。
上でc++で作成したdllを読み込んで、その中身を呼び出す関数をC#対応のdllに書き出す。

CsMain : C#
C#プロジェクト。
c++/cliで作成したdllを呼び出すことができるのでGUI作成とかが捗る。



[ビルド設定変更点]
-ソリューション-構成マネージャ
CsMain	: Debug   x86 - AnyCPU -> x86
				: Debug   x64 - AnyCPU -> x64
				: Release x86 - AnyCPU -> x86
				: Release x64 - AnyCPU -> x64
...C#のビルドは規定ではAnyCPUになっている（動作している環境に合わせて32bit64bit切り替える）が
dllのビット数が違うと動かないのでビルド設定ごとに固定している。

-CsMain-ビルドの依存関係-プロジェクトの依存関係-依存先
CppCli - false -> true
-CppCli-ビルドの依存関係-プロジェクトの依存関係-依存先
CppProject - false -> true
...CppProject,CppCli,CsMainの順でビルドしてもらわないとdllの参照ができないので依存関係を設定している。

-ソリューション-スタートアッププロジェクトの設定-スタートアッププロジェクト
マルチスタートアッププロジェクト -> シングルスタートアッププロジェクト
CppProject -> CsMain
...F5実行時にdllもデバッグ実行しようとしてエラーウィンドウ出てきてイヤなので
C#プロジェクトのみデバッグ実行するように変更（ブレイクポイントとかはC++とかの方でもちゃんと効くので大丈夫）



[VisualStudio上でのプロジェクト設定変更点]
CppProject & CppCli
-プロパティ-構成プロパティ-全般-出力ディレクトリ
構成 : すべての構成　プラットフォーム : すべてのプラットフォーム
個別オプション -> $(SolutionDir)2_CsMain\bin\$(Configuration)\netcoreapp3.1\

CsMain
-プロパティ-ビルド-出力パス
構成 : Release　プラットフォーム : すべてのプラットフォーム
(空白) -> bin\Release\
構成 : Debug　　プラットフォーム : すべてのプラットフォーム
(空白) -> bin\Debug\
...出力先を全部1つのフォルダにまとめちゃう。
C#の方ですべての構成変更かけるとセーブしたら文字が消えちゃうけどちゃんと適用はされてるので大丈夫

CppProject
構成 : すべての構成　プラットフォーム : すべてのプラットフォーム
-プロパティ-構成プロパティ-全般-構成の種類
アプリケーション(.exe) -> ダイナミックライブラリ(.dll)
...dllで出力するように変更。CppCliは生成時点でdllになっているハズなので変更不要

CsMain
-プロパティ-デバッグ-ネイティブコードデバッグを有効にする
false -> true
...これを入れるとC++の方のデバッガでウォッチ式が使えるようになる。
使えなかったら...↓

CppProject&Cppcli
構成 : すべての構成　プラットフォーム : すべてのプラットフォーム
-プロパティ-構成プロパティ-デバッガーの種類
自動 -> 混合(.Net Core)
...自動で問題あれば直接混合指定してあげてください

CppCli
構成 : すべての構成　プラットフォーム : すべてのプラットフォーム
-プロパティ-構成プロパティ-全般-C++言語標準
規定(ISO C++14標準) -> ISO C++17標準
...C++のバージョンを17にしている。filesystem便利すぎるから… ここ17の機能使わなければ別に変えなくていいです。

CppProject&Cppcli
構成 : すべての構成　プラットフォーム : x86
-プロパティ-構成プロパティ-全般-ターゲット名
$(ProjectName) -> $(ProjectName)32

構成 : すべての構成　プラットフォーム : x64
-プロパティ-構成プロパティ-全般-ターゲット名
$(ProjectName) -> $(ProjectName)64
...ビットごとにdllを分けたいのでビット数を名前につける